{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}

{% block title %} {{gallery.gallery_name}} {% endblock title %}

{% block style %}
    <link rel="stylesheet" href="{% static 'gallery/style.css' %}">
{% endblock style %}

{% block content %}
    <section class="shadow">
        <div class="container my-3">
            <div class="row justify-content-center text-center">
                <div>
                    <p><span class="fs-5 fw-bold">Profile</span></p>
                </div>
                <div class="col-3">
                    <p class="gallery-paragraph"><strong>Gallery Owner: </strong>{{gallery.owner.username}}</p>
                </div>

                <div class="col-3">
                    <p class="gallery-paragraph"><strong>Gallery Artworks: </strong>{{gallery.artworks.count}}</p>
                </div>

                <div class="col-3">
                    <p class="gallery-paragraph"><strong>Gallery Rating: </strong>0 <i class="bi bi-star-fill"></i> </p> 
                </div>
            </div>
        </div>
    </section>


    <section class="shadow-lg">
        <div class="container-fluid" data-bs-theme="dark">
            <div class="row">
                <div class="col">
                    <div class="row">
                        <div class="col-xl-3 col-lg-4 p-3 d-flex flex-column align-items-center border-end">
                            {% if gallery.cover_photo %}
                                <img src="{{gallery.cover_photo.url}}" alt="" class="gallery-cover-photo img-fluid shadow-lg">
                            {% else %}
                                <img src="../../../media/profile_pictures/default.jpg" alt="" class="gallery-cover-photo img-fluid shadow-lg">
                            {% endif %}
                            <div>
                                <i class="bi bi-star-fill me-2"></i>
                                <i class="bi bi-star-fill me-2"></i>
                                <i class="bi bi-star-fill me-2"></i>
                                <i class="bi bi-star-fill me-2"></i>
                                <i class="bi bi-star-fill me-2"></i>
                            </div>
                        </div>
                        <div class="col-lg-8 col-12 p-3">
                            <div class="gallery-information-div d-flex flex-column justify-content-center">
                                <h1 class="mb-3">{{gallery.gallery_name}}</h1>
                                <p class="gallery-paragraph">
                                    {{gallery.description}}
                                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Placeat qui pariatur quam perspiciatis. Aspernatur cum ea
                                    aliquid aut est quisquam molestiae veritatis blanditiis at! Eos quaerat perferendis minima fugiat optio. Temporibus,
                                    nesciunt obcaecati fugiat repudiandae id esse consequuntur ad voluptatibus dicta quam reprehenderit. Odio incidunt
                                    sapiente tempora nesciunt animi ea, iure excepturi suscipit architecto vero repellendus corporis fuga non veritatis,
                                    odit praesentium dolorem amet dolore delectus, aperiam quam! Quisquam ducimus, velit placeat qui accusamus
                                    blanditiis. Ratione consectetur explicabo aspernatur rerum maxime eum non dolorum unde excepturi quasi incidunt,
                                    nemo molestias neque. Odit, nostrum repudiandae temporibus est doloremque mollitia repellendus labore!
                                </p>
                            </div>
                            {% if user == gallery.owner %}
                                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h1 class="modal-title fs-5" id="exampleModalLabel">Add Artwork</h1>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                <form action="{% url 'gallery:create_artwork' gallery.owner.username gallery.slug %}" method="post" enctype="multipart/form-data">
                                                    {% csrf_token %}
                                                    <div class="mb-3">
                                                        <label for="{{form.title.id_for_label}}">Artwork Title</label>
                                                        {% render_field form.title class+="form-control" %}
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="{{form.description.id_for_label}}" class="form-label">Artwork Description</label>
                                                        {% render_field form.description class+="form-control" rows=5 %}
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="{{form.image.id_for_label}}" class="form-label">Artwork Image</label>
                                                        {% render_field form.image class+="form-control" %}
                                                    </div>
                                                    <div class="text-end">
                                                        <button class="btn outline-btn">Add Artwork</button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-3 col-4">
                                        <button class="btn outline-btn me-2" data-bs-toggle="modal" data-bs-target="#exampleModal">Add Artwork</button>
                                    </div>
                                    <div class="col-lg-9 col d-flex justify-content-end">
                                        <button class="btn outline-btn me-3">Edit Gallery</button>
                                        <button class="btn outline-btn">Delete Gallery</button>
                                    </div>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="shadow-lg">
        <div class="container-md pt-5" data-bg-theme="dark">
            <div class="row p-4">
                <h2 class="text-center mb-4">Artworks</h2>
                {% for artwork in artworks %}
                    <div class="col-12 col-md-6 col-lg-4 mb-4 d-flex justify-content-center ">
                        <div class="card">
                            <div class="mx-auto pt-3">
                                <img src="{{artwork.image.url}}" alt="" class="gallery-artwork-card-img card-img-top">
                            </div>
                            <div class="card-body d-flex flex-column justify-content-end">
                                <div class="card-title"><span>{{artwork.title}}</span></div>
                                <div class="card-text"><span>{{artwork.description | truncatewords:3}}</span></div>
                                <div class="text-center">
                                    <button class="btn outline-btn mt-3">Inspect</button>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>
{% endblock content %}